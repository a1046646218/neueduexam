<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

	<head>

		<!-- Basic -->
		<meta charset="UTF-8" />

		<title>学生home</title> 

		<!-- Mobile Metas -->
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		
		<!-- Import google fonts -->
        <link th:href='@{static/http://fonts.useso.com/css?family=Titillium+Web}' rel='stylesheet' type='text/css'>
        
		<!-- Favicon and touch icons -->
		<link rel="shortcut icon" th:href="@{static/assets/ico/favicon.ico}" type="image/x-icon" />
		<link rel="apple-touch-icon" th:href="@{static/assets/ico/apple-touch-icon.png}" />
		<link rel="apple-touch-icon" sizes="57x57" th:href="@{static/assets/ico/apple-touch-icon-57x57.png}" />
		<link rel="apple-touch-icon" sizes="72x72" th:href="@{static/assets/ico/apple-touch-icon-72x72.png}" />
		<link rel="apple-touch-icon" sizes="76x76" th:href="@{static/assets/ico/apple-touch-icon-76x76.png}" />
		<link rel="apple-touch-icon" sizes="114x114" th:href="@{static/assets/ico/apple-touch-icon-114x114.png}" />
		<link rel="apple-touch-icon" sizes="120x120" th:href="@{static/assets/ico/apple-touch-icon-120x120.png}" />
		<link rel="apple-touch-icon" sizes="144x144" th:href="@{static/assets/ico/apple-touch-icon-144x144.png}" />
		<link rel="apple-touch-icon" sizes="152x152" th:href="@{static/assets/ico/apple-touch-icon-152x152.png}" />
		
	    <!-- start: CSS file-->
		
		<!-- Vendor CSS-->
		<link th:href="@{static/assets/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/skycons/css/skycons.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/font-awesome/css/font-awesome.min.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/css/pace.preloader.css}" rel="stylesheet" />
		
		<!-- Plugins CSS-->
		<link th:href="@{static/assets/plugins/bootkit/css/bootkit.css}" rel="stylesheet" />
		<link th:href="@{static/assets/plugins/select2/select2.css}" rel="stylesheet" />
		<link th:href="@{staitc/assets/plugins/jquery-datatables-bs3/css/datatables.css}" rel="stylesheet" />		
		
		<!-- Theme CSS -->
		<link th:href="@{static/assets/css/jquery.mmenu.css}" rel="stylesheet" />
		
		<!-- Page CSS -->		
		<link th:href="@{static/assets/css/style.css}" rel="stylesheet" />
		<link th:href="@{static/assets/css/add-ons.min.css}" rel="stylesheet" />
		
		<!-- end: CSS file-->	

		<!-- Head Libs -->
		<script th:src="@{static/assets/plugins/modernizr/js/modernizr.js}"></script>
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

	</head>

	<body>
   


		<!-- Start: Header -->
		<div class="navbar" role="navigation">
			<div class="container-fluid container-nav">

				<!-- Navbar Left -->

				<!-- Navbar Right -->
				<div class="navbar-right">
					<!-- Notifications -->
					<ul class="notifications hidden-xs">
					</ul>
					<!-- End Notifications -->
					<!-- Userbox -->
					<!-- End Userbox -->
				</div>
				<!-- End Navbar Right -->
			</div>
		</div>
		<!-- End: Header -->

		<!-- Start: Content -->
		<div class="container-fluid content">
			<div class="row">

				<!-- Sidebar -->
				<div class="sidebar">
					<div class="sidebar-collapse">
						<!-- Sidebar Header Logo-->
						<div class="sidebar-header">
							<img th:src="@{static/assets/img/logo.png}" class="img-responsive" alt="" />
						</div>
						<!-- Sidebar Menu-->
						<div class="sidebar-menu">
							<nav id="menu" class="nav-main" role="navigation">
								<ul class="nav nav-sidebar">
									<li>
										<a href="admin1">
											<i class="fa fa-laptop" aria-hidden="true"></i><span>数据分析</span>
										</a>
									</li>
									<li>
										<a href="toCheckIllegalQuestion">
											<!-- <span class="pull-right label label-danger">235</span> -->
											<i class="fa fa-folder-o" aria-hidden="true"></i><span>敏感词分析</span>
										</a>
									</li>
									<li>
										<a href="toGuanLiYuan">
											<!-- <span class="pull-right label label-danger">235</span> -->
											<i class="fa fa-folder-o" aria-hidden="true"></i><span>用户管理</span>
										</a>
									</li>
									<li>
										<a href="toadmin11">
											<!-- <span class="pull-right label label-danger">235</span> -->
											<i class="fa fa-folder-o" aria-hidden="true"></i><span>题库查重</span>
										</a>
									</li>
								</ul>
							</nav>
						</div>
						<!-- End Sidebar Menu-->
					</div>
					<!-- Sidebar Footer-->
					<div class="sidebar-footer">
						<div class="small-chart-visits">
							<div class="small-chart" id="sparklineLineVisits"></div>
							<div class="small-chart-info">
								<label>New Visits</label>
								<strong>70,79%</strong>
							</div>
							<script type="text/javascript">
								var sparklineLineVisitsData = [15, 16, 17, 19, 15, 25, 23, 35, 29, 15, 30, 45];
							</script>
						</div>
						<ul class="sidebar-terms bk-margin-top-10">
							<li>
								<a href="#">Terms</a>
							</li>
							<li>
								<a href="#">Privacy</a>
							</li>
							<li>
								<a href="#">Help</a>
							</li>
							<li>
								<a href="#">About</a>
							</li>
						</ul>
					</div>
					<!-- End Sidebar Footer-->
				</div>
				<!-- End Sidebar -->

				<!-- Main Page -->
				<div class="main ">
					<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
						<div class="panel panel-default bk-bg-white">
							<div class="panel-heading bk-bg-white">
								<h6 id="biaoti"><i class="fa fa-table red"></i><span class="break">用户表</span></h6>							
								<div class="panel-actions">
									<a href="#" class="btn-minimize"><i class="fa fa-caret-up"></i></a>
									<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
								</div>
							</div>
							<div class="panel-body">
								<table class="table  table-bordered table-hover" id="table">
								</table>
							</div>
							<!--表格结束 -->
						</div>
					</div>

					<!-- End Main Page -->

					<!-- Footer -->

					<!-- End Footer -->

				</div>
			</div>
			<!--/container-->

			<!-- <div class="clearfix"></div> -->

			<!-- start: JavaScript-->
			
			<!-- Vendor JS-->				
			<script th:src="@{static/assets/vendor/js/jquery.min.js}"></script>
			<script th:src="@{static/assets/vendor/js/jquery-2.1.1.min.js}"></script>
			<script th:src="@{static/assets/vendor/js/jquery-migrate-1.2.1.min.js}"></script>
			<script th:src="@{static/assets/vendor/bootstrap/js/bootstrap.min.js}"></script>
			<script th:src="@{static/assets/vendor/skycons/js/skycons.js}"></script>
			<script th:src="@{static/assets/vendor/js/pace.min.js}"></script>
			
			<!-- Plugins JS-->
			<!-- <script src="http://maps.google.com/maps/api/js?sensor=false"></script> -->
			<!-- <script th:src="@{static/assets/plugins/gmaps/gmaps.js}"></script> -->
			<script th:src="@{static/assets/plugins/moment/js/moment.min.js}"></script>
			<script th:src="@{static/assets/plugins/select2/select2.js}"></script>				
			<script th:src="@{static/assets/plugins/jquery-datatables/media/js/jquery.dataTables.js}"></script> 
			<script th:src="@{static/assets/plugins/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js}"></script>
			<script th:src="@{static/assets/plugins/jquery-datatables-bs3/js/datatables.js}"></script>
			<script th:src="@{static/assets/plugins/sparkline/js/jquery.sparkline.min.js}"></script>		 
			<!-- Theme JS -->		
			<script th:src="@{static/assets/js/jquery.mmenu.min.js}"></script>
			<script th:src="@{static/assets/js/core.min.js}"></script>
			
			<!-- Pages JS -->
			<!-- <script th:src="@{static/assets/js/pages/map-basic.js}"></script> -->
			<script th:src="@{static/assets/js/pages/table-advanced.js}"></script>
			<script th:src="@{static/js/template.js}"></script>
			<script th:src="@{static/layer/layer.js}"></script>
			<script th:src="@{static/js/echarts.min.js}"></script>
			<script th:src="@{static/js/echarts-gl.min.js}"></script>
			
			<script>
				var table = $("#table").DataTable({
					sDom: "<'row datatables-header form-inline'<'col-sm-12 col-md-7 fanye'l><'col-sm-12 col-md-5 sousuo'f>r><'table-responsive't><'row datatables-footer'<'col-sm-12 col-md-10'i><'col-sm-12 col-md-2 fanye' p>>",
					//json格式  
					//分页样式 http://datatables.club/reference/option/pagingType.html
						//"pagingType": "simple_numbers",
					//proccessing 用于当处理大量数据时，提示正在加载 http://datatables.club/reference/option/processing.html
					"autoWidth":false,
					"processing": true,
					// language代表语言
					"language": {
							"sProcessing":   "处理中...",
							"sLengthMenu":   "显示 _MENU_ 项结果",
							"sZeroRecords":  "没有匹配结果",
							"sInfo":         "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
							"sInfoEmpty":    "显示第 0 至 0 项结果，共 0 项",
							"sInfoFiltered": "(由 _MAX_ 项结果过滤)",
							"sInfoPostFix":  "",
							//"search":       "输入关键字进行搜索",
							"sUrl":          "",
							"sEmptyTable":     "表中数据为空",
							"sLoadingRecords": "载入中...",
							"sInfoThousands":  ",",
							"searchPlaceholder" : "完全搜索匹配",
							"oPaginate": {
								"sFirst":    "首页",
								"sPrevious": "上页", 
								"sNext":     "下页",
								"sLast":     "末页"
							},
							"oAria": {
								"sSortAscending":  ": 以升序排列此列",
								"sSortDescending": ": 以降序排列此列"
							}
	   				},
	       			 // "columnDefs": [
	       			 //   { "width": "8%", "targets": 0 }
	       			 // ],
	   				//lengthMenu代表每页显示数量 详情见:http://datatables.club/reference/option/lengthMenu.html
						"lengthMenu": [ [10, 25, 50, 100,-1], [10, 25, 50, 100,"all"] ],
					"ajax":{
						url:"/getUserListJson",
					},
					columns:[
	            		{
	            			"data":"userid",
	            			"title":"用户ID",
	            		},
	            		{
	            			"title":"头像",
	            			"data":"headphoto","render":function(data,type,row,meta){
	            											var html = "<img style='height:50%;' src="+data+"/>"
	            											return html;
	            										}
	            		},
	            		{
	            			"data":"phone",
	            			"title":"电话号"
	            		},
	            		{
	            			"data":"realname",
	            			 "title":"真实姓名"
	            		},
	            		{
	            			"data":"email",
	            			"title":"电子邮箱"
	            		},
	            		{
	            			"data":"nickname",
	            			"title":"昵称"
	            		},
	            		{
	            			"data":"points",
	            			"title":"points"
	            		},
	            		{
	            			"title":"操作",
	            			"data":null,"render":function(data,type,row,meta){
	            									if(row.type=="学生")
	            										var html = "<button class='btn btn-primary' type='student' userid='"+row.userid+"'>升级成老师</button>";
	            									else if(row.type=="老师")
	            										var html = "<button class='btn btn-danger' type='teacher' userid='"+row.userid+"'>降级为学生</button>";
	            									return html; 
	            								}
	            		}
	      			],
				});	
				$("div[class='col-sm-12 col-md-7 fanye']").attr("style","padding-right:50px");
				$("div[class='col-sm-12 col-md-5 sousuo']").attr("style","padding-left:300px");

				$(document.body).on("click","button[userid]",function(){
					var userId = $(this).attr("userid");
					var type = $(this).attr("type");
					$.ajax({
						type:"post",
						url:"updateStudentType",
						data:{"userId":userId,"type":type},
						success:function(){
							layer.msg("操作成功");
							table.ajax.reload(null, false);
						},
						error:function(){
							layer.msg("操作失败");
							table.ajax.reload(null, false);
						}
					});
				});
			</script>
			
	</body>
</html>