<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">

	<head>
	
		<!-- Basic -->
    	<meta charset="UTF-8" />

		<title>Map Basic | Fire - Admin Template</title>
	
		<!-- Mobile Metas -->
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		
		<!-- Import google fonts -->
        <!-- <link href='http://fonts.useso.com/css?family=Titillium+Web' rel='stylesheet' type='text/css'> -->
         <style>
        	.dropzone {
            border: 2px dashed #0087F7;
            border-radius: 5px;
            background: white;
        }
        	
        </style>
        <link rel="stylesheet" type="text/css" th:href="@{static/dropzone/dropzone.css}">
        <!-- <link rel="stylesheet" type="text/css" th:href="@{static/dist/dropzone.min.css}"> -->
         <script th:src="@{static/dropzone/dropzone.js}"></script>
		 
		 
		<!-- Favicon and touch icons -->
		<link rel="shortcut icon" th:href="@{static/assets/ico/favicon.ico}" type="image/x-icon" />
		<link rel="apple-touch-icon" th:href="@{static/assets/ico/apple-touch-icon.png}" />
		<link rel="apple-touch-icon" sizes="57x57" th:href="@{static/assets/ico/apple-touch-icon-57x57.png}" />
		<link rel="apple-touch-icon" sizes="72x72" th:href="@{static/assets/ico/apple-touch-icon-72x72.png}" />
		<link rel="apple-touch-icon" sizes="76x76" th:href="@{static/assets/ico/apple-touch-icon-76x76.png}" />
		<link rel="apple-touch-icon" sizes="114x114" th:href="@{static/assets/ico/apple-touch-icon-114x114.png}" />
		<link rel="apple-touch-icon" sizes="120x120" th:href="@{static/assets/ico/apple-touch-icon-120x120.png}" />
		<link rel="apple-touch-icon" sizes="144x144" th:href="@{static/assets/ico/apple-touch-icon-144x144.png}" />
		<link rel="apple-touch-icon" sizes="152x152" th:href="@{static/assets/ico/apple-touch-icon-152x152.png}" />
		
	    <!-- start: CSS file-->
		
		<!-- Vendor CSS-->
		<link th:href="@{static/assets/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/skycons/css/skycons.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/font-awesome/css/font-awesome.min.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/css/pace.preloader.css}" rel="stylesheet" />
		
		<!-- Plugins CSS-->
		<link th:href="@{static/assets/plugins/bootkit/css/bootkit.css}" rel="stylesheet" />
	<!-- 	<link th:href="@{static/assets/plugins/jqvmap/<strong>jqvmap</strong>.css}" rel="stylesheet" /> -->
		
		<!-- Theme CSS -->
		<link th:href="@{static/assets/css/jquery.mmenu.css}" rel="stylesheet" />
		
		<!-- Page CSS -->		
		<link th:href="@{static/assets/css/style.css}" rel="stylesheet" />
		<link th:href="@{static/assets/css/add-ons.min.css}" rel="stylesheet" />
		
		<!-- end: CSS file-->	
	    
		
		<!-- Head Libs -->
		<script th:src="@{static/assets/plugins/modernizr/js/modernizr.js}"></script>
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->		
		
	</head>
	
	<body>
	
		<!-- Start: Header -->
		<div class="navbar" role="navigation">
			<div class="container-fluid container-nav">
				
				<!-- Navbar Left -->
				
				<!-- Navbar Right -->
				<div class="col-lg-6 bk-fg-info">
				<a class="col-xs-2 bk-fg-info" href="home">
				<i class=" glyphicon glyphicon-home"></i> <small> 首页</small>
				</a>
				<a class="col-xs-2 bk-fg-info" href="toshop">
				<i class="fa fa-shopping-cart"></i> <small> 商城</small>
				</a>
				<a class="col-xs-2 bk-fg-info" href="grouphome">
				<i class="fa fa-envelope"></i> <small> 群组</small>
				</a>
				
				</div>
				
				<!-- Navbar Right -->
				<div class="navbar-right">					
					<!-- Notifications -->
					<ul class="notifications hidden-xs">
						
					</ul>
					<!-- End Notifications -->					
					<!-- Userbox -->
					<div class="userbox">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<figure class="profile-picture hidden-xs">
								<img th:src="${session.user.headphoto}" class="img-circle" alt="" />
							</figure>
							<div class="profile-info">
								<span class="name">用户名：<span th:text="${session.user.nickname}"></span></span>
								<span class="role"><i class="fa fa-circle bk-fg-success"></i> 用户类型:<span th:text="${session.user.type}"></span></span>
							</div>			
							<i class="fa custom-caret"></i>
						</a>
						<div class="dropdown-menu bk-padding-top-70">
							<ul class="list-unstyled">	
								<li>
									<a href="getinpeoplehome"><i class="fa fa-user"></i>个人中心</a>
								</li>
								<li>
									<a href="topayhome"><i class="fa fa-usd"></i>账户充值</a>
								</li>
								<li>
									<a href="loginoutMJ"><i class="fa fa-power-off"></i>退出</a>
								</li>
							</ul>
						</div>						
					</div>
					<!-- End Userbox -->
				</div>
				<!-- End Navbar Right -->
			</div>		
		</div>
		<!-- End: Header -->
		
		<!-- Start: Content -->
		<div class="container-fluid content">	
			<div class="row">
			
				<!-- Sidebar -->
				<div class="sidebar">
					<div class="sidebar-collapse">
						<!-- Sidebar Header Logo-->
						<div class="sidebar-header">
							<img th:src="@{static/assets/img/logo.png}" class="img-responsive" alt="" />
						</div>
						<!-- Sidebar Menu-->
						<div class="sidebar-menu">						
							<nav id="menu" class="nav-main" role="navigation">
								<ul class="nav nav-sidebar">
									<div class="panel-body text-center">								
										<div class="flag">
											<button type="button" data-toggle="modal" data-target="#createexammodel" class="bk-margin-10 btn btn-primary btn-lg"><i class="fa fa-pencil-square-o"></i>创建试卷</button>
											<!-- <img th:src="@{static/assets/img/flags/USA.png}" class="img-flags" alt="" /> -->
										</div>
									</div>
									<li>
										<a href="toteacherhome">
											<i class="fa fa-laptop" aria-hidden="true"></i><span>个人中心</span>
										</a>
									</li>
										<li class="nav-parent">
										<a>
											<i class="fa fa-table" aria-hidden="true"></i><span>我的考试</span>
										</a>
										<ul class="nav nav-children">
											<li><a href="toteacherhasexam"><span class="text"> 我的卷纸</span></a></li>
											<li><a href="toteacherpublichexam"><span class="text"> 发布的卷纸</span></a></li>
										</ul>
									</li>
									<li>
										<a href="toteacherquestionlib">
											<!-- <span class="pull-right label label-danger">235</span> -->
											<i class="fa fa-folder-o" aria-hidden="true"></i><span>我的题库</span>
										</a>
									</li>
									<li>
										<a href="grouphome">
											<!-- <span class="pull-right label label-danger">235</span> -->
											<i class="fa fa-folder-o" aria-hidden="true"></i><span>我的群组</span>
										</a>
									</li>
									<li>
										<a href="toteacherpayrecord">
											<i class="fa  fa-shopping-cart" aria-hidden="true"></i><span>消费记录</span>
										</a>
									</li>			
									
								</ul>
							</nav>
						</div>
						<!-- End Sidebar Menu-->
					</div>
					<!-- Sidebar Footer-->
					<div class="sidebar-footer">					
						<div class="small-chart-visits">
							<div class="small-chart" id="sparklineLineVisits"></div>
							<div class="small-chart-info">
								<label>New Visits</label>
								<strong>70,79%</strong>
							</div>
							<script type="text/javascript">
								var sparklineLineVisitsData = [15, 16, 17, 19, 15, 25, 23, 35, 29, 15, 30, 45];
							</script>
						</div>
						<ul class="sidebar-terms bk-margin-top-10">
							<li><a href="#">Terms</a></li>
							<li><a href="#">Privacy</a></li>
							<li><a href="#">Help</a></li>
							<li><a href="#">About</a></li>
						</ul>					
					</div>
					<!-- End Sidebar Footer-->
				</div>
				<!-- End Sidebar -->
				
				<!-- Main Page -->
				<div class="main " id="rowlib">
					<!-- Page Header -->
					<div class="page-header">
						<div class="pull-left">
							<ol class="breadcrumb visible-sm visible-md visible-lg">								
								<li><a href="#"><i class="icon fa fa-adjust"></i>我的考试</a></li>
								<li class="active"><i class="fa fa-map-marker"></i>未评测考试</li>
							</ol>						
						</div>
					</div>
					<!-- End Page Header -->					
					<!--/container-->
					
					<!--新加-->
					<div class="panel panel-default bk-widget bk-border-off">
								<div class="panel-heading">
									<h6><i class="fa  fa-folder-open"></i>发布的卷纸</h6>
									<div class="panel-actions">
										<a href="#" class="btn-minimize"><i class="fa fa-caret-up"></i></a>
										<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
									</div>
								</div>
								
								<div class="panel-body">
									
									<div id="addallpublishexam" class="bk-bg-white bk-bg-lighten bk-padding-off-top bk-padding-off-bottom bk-noradius">
									
									
									
									
									
									
									
									
									
									
									
									<br>
									<div class="row">
										<div class="col-xs-4" id="beforepage">
											<a href="#" class="bk-fg-textcolor"><small><i class="fa fa-angle-left"></i> 上一页</small></a>
										</div>
										<div class="col-xs-4 text-center">
											<a href="#" class="bk-fg-textcolor"><small>第<span id="pagenum">1</span>页</small></a>
										</div>
										<div class="col-xs-4 text-right" id="afterpage">
											<a href="#" class="bk-fg-textcolor"><small>下一页<i class="fa fa-angle-right"></i></small></a>
										</div>
									</div>
								</div>
							</div>
					</div>
					
					
					<!--原本-->
					<!-- <div class="row">
					<div style="float:right;padding-right:100px;">
						<div>
							<button type="button" id="beforepage" class="bk-margin-5 btn btn-default">上一页</button>
							<button type="button" class="btn btn-default" id="pagenum" >1</button>
							<button type="button" id="afterpage" class="bk-margin-5 btn btn-default">下一页</button>
						</div>
					</div>
					</div> -->
					</div>
		<!-- <div class="clearfix"></div>	 -->	
		
		
		<!-- start: JavaScript-->
		
		<!-- Vendor JS-->				
		<script th:src="@{static/assets/vendor/js/jquery.min.js}"></script>
		<script th:src="@{static/assets/vendor/js/jquery-2.1.1.min.js}"></script>
		<script th:src="@{static/assets/vendor/js/jquery-migrate-1.2.1.min.js}"></script>
		<script th:src="@{static/assets/vendor/bootstrap/js/bootstrap.min.js}"></script>
		<script th:src="@{static/assets/vendor/skycons/js/skycons.js}"></script>
		<script th:src="@{static/assets/vendor/js/pace.min.js}"></script>
		
		<!-- Plugins JS-->
		<!-- <script src="http://maps.google.com/maps/api/js?sensor=false"></script> -->
		<!-- <script th:src="@{static/assets/plugins/gmaps/gmaps.js}"></script> -->
		<script th:src="@{static/assets/plugins/sparkline/js/jquery.sparkline.min.js}"></script>
		
		<!-- Theme JS -->		
		<script th:src="@{static/assets/js/jquery.mmenu.min.js}"></script>
		<script th:src="@{static/assets/js/core.min.js}"></script>
		
		<!-- Pages JS -->
		<!-- <script th:src="@{static/assets/js/pages/map-basic.js}"></script> -->
		
		<!-- end: JavaScript-->
		  <script th:src="@{static/js/template.js}"></script>
			<script th:src="@{static/layer/layer.js}"></script>
			<script th:src="@{static/layer/extend/layer.ext.js}"></script>
	</body>
	<script type="text/html" id="contentTemplate">
			<div class="row bk-padding-bottom-20 bk-padding-top-15">
					<div class="col-lg-1 col-md-2 col-sm-2 col-xs-12 bk-vcenter bk-padding-top-10 bk-padding-bottom-10">
						<div class="bk-round bk-border-off bk-bg-darken bk-icon bk-icon-2x bk-icon-default bk-bg-primary">
							<i class="fa fa-comment fa-2x"></i>
						</div>
					</div>
					<div class="col-lg-7 col-md-10 col-sm-10 col-xs-12 bk-vcenter">
						<div class="row">
							<h6 class="bk-fg-primary bk-fg-darken bk-margin-off-bottom">
							<span style="width: auto;border-left: 2px solid #0FB492;">&nbsp;<strong class=" bk-fg-primary bk-padding-right-20" style="font-size: 16px;margin-top: 5px;">{{testname}}</strong></span>
							<span class="badge bk-bg-info">发布时间：{{publishdate}}</span>
							<span class="badge bk-bg-danger">截止时间：{{other1}}</span></h6>
					    </div>
						
						<p style="margin-bottom:0px;">
							<small style="padding-right: 20px;">弹出次数限制：{{limitchanges}}次</small>
							<small>考试时间限制：{{countdown}}秒</small>
						</p>
						<label>题目结构：</label>
						<div class="row" testid="{{testid}}">
							
						</div>
					</div>
				<div class="col-lg-4 col-md-10 col-sm-10 col-xs-12 bk-vcenter">
					<div class="panel-body  bk-bg-white text-center">
						<div class="row">
						<div class="col-lg-4">
			        	<button type="button" class="btn  dropdown-toggle" data-toggle="dropdown" style="border-bottom:0px;padding-top:0px;">
					      <div class="bk-fg-warning">
					      	<h6 class="bk-margin-off ">邀请答题</h6>
					       <i class="fa  fa-users fa-2x bk-padding-top-10"></i> 
					      </div>
				       </button>
				        <ul class="dropdown-menu" role="menu" >
					     <li id="addexcel" name="{{testid}}"><a >批量导入</a></li>
					     <li id="addone" name="{{testid}}"><a >单个导入</a></li>
				       </ul>
					    </div> 	
						<a class="col-lg-4 bk-fg-info">
						<h6 class="bk-margin-off">批改考试</h6>
			            <i class="fa fa-send fa-2x bk-padding-top-10"></i>
						</a>	
								
					    <a class="col-lg-4 bk-fg-primary">
						<h6 class="bk-margin-off ">查看试卷</h6>
			            <i class="fa  fa-file-text fa-2x bk-padding-top-10"></i>
					    </a> 
			            </div> 
					</div>	
				</div>
			</div>
			<hr class="bk-margin-off">
    </script>	
	
	
	
	<script type="text/html" id="numTemplate">
		<div class="row text-center col-lg-2">
		  <small class="bk-fg-inverse bk-fg-darken">单选题</small>
		  <h5 class="bk-margin-off-bottom">{{single[0]}}道</h5>
		 </div>
		 <div class="row text-center col-lg-2">
		  <small class="bk-fg-inverse bk-fg-darken">多选题</small>
		  <h5 class="bk-margin-off-bottom">{{mul[0]}}道</h5>
		 </div>
		 <div class="row text-center col-lg-2">
		  <small class="bk-fg-inverse bk-fg-darken">判断题</small>
		  <h5 class="bk-margin-off-bottom">{{jud[0]}}道</h5>
		 </div>
		 <div class="row text-center col-lg-2">
		  <small class="bk-fg-inverse bk-fg-darken">填空题</small>
		  <h5 class="bk-margin-off-bottom">{{tian[0]}}道</h5>
		 </div>
		 <div class="row text-center col-lg-2">
		  <small class="bk-fg-inverse bk-fg-darken">简答题</small>
		  <h5 class="bk-margin-off-bottom">{{jian[0]}}道</h5>
		 </div>
		<!-- <tr><td>单选题</td><td>{{single[0]}}</td><td>{{single[1]}}</td><td>{{single[2]}}</td><td>{{single[3]}}</td></tr>
		<tr><td>多选题</td><td>{{mul[0]}}</td><td>{{mul[1]}}</td><td>{{mul[2]}}</td><td>{{mul[3]}}</td></tr>
		<tr><td>判断题</td><td>{{jud[0]}}</td><td>{{jud[1]}}</td><td>{{jud[2]}}</td><td>{{jud[3]}}</td></tr>
		<tr><td>填空题</td><td>{{tian[0]}}</td><td>{{tian[1]}}</td><td>{{tian[2]}}</td><td>{{tian[3]}}</td></tr>
		<tr><td>综合题</td><td>{{jian[0]}}</td><td>{{jian[1]}}</td><td>{{jian[2]}}</td><td>{{jian[3]}}</td></tr> -->
	</script>
	<script type="text/javascript">
		var page = 1;
		
		function change(num){
			$.ajax({
				type:'post',
				url:'gettestpapaerAjaxDTF',
				async:false,
				data:"page="+page,
				success:function(result){
					if($.isEmptyObject(result)){
						layer.msg("没有更多内容");
						page = page-1;
						$('#pagenum').text(page);
						return;
					}
					for(var i=0;i<result.length;i++){
						for(var i=0;i<result.length;i++){
							var newContentNews = template("contentTemplate",result[i]);
							$("#addallpublishexam").prepend(newContentNews);
							$.ajax({
								type:'post',
								url:'gettesteasynumAjaxDTF',
								async:false,
								data:"testid="+result[i].testid,
								success:function(intjsonarr){
									console.log(intjsonarr);
									var numcontent = template("numTemplate",intjsonarr);
									$("[testid="+result[i].testid+"]").append(numcontent);
								}
							});
						}
					}
				}
			});				
		}
		$('#afterpage').click(function(){
			page = page+1;
			$('#pagenum').text(page);
			change(page);
		});
		$('#beforepage').click(function(){
			if(page!=1){
			page = page-1;
			$('#pagenum').text(page);
			change(page);
			}	
		});
		$(document).ready(function(){
			change(page);
		});
		$("#addexcel").live("click",function(){
			var arr = $(this).attr("name");
			layer.prompt({title: '请输入您的密码', formType: 1}, function(pass, index){
					layer.close(index);
					$.ajax({
							type:'post',
							url:'ispasswordtrue',
							async:false,
							data:{"pass":pass},
							success:function(flag){
								if(flag==1){
									$.ajax({
											type:'post',
											url:'addexcelsession',
											async:false,
											data:{"testid":arr},
											success:function(flag){
												$("#addsomeexcel").click();
											}
									});
								}else{
									layer.msg("密码错误");
								}
							}
					});
					
			});
		});
		$("#addone").live("click",function(){
			var arr = $(this).attr("name");
			layer.prompt({title: '请输入您的密码', formType: 1}, function(pass, index){
					layer.close(index);
					$.ajax({
							type:'post',
							url:'ispasswordtrue',
							async:false,
							data:{"pass":pass},
							success:function(flag){
								if(flag==1){
									layer.prompt({title: '请输入邀请人电话', formType: 0}, function(text, index){
									layer.close(index);
									$.ajax({
											type:'post',
											url:'addoneuser',
											async:false,
											data:{"testid":arr,"phonenum":text},
											success:function(flag){
												if(flag==1){
													layer.msg('邀请成功');
												}else{
													layer.msg('邀请失败');
												}
											}
									});
									})
								}else{
									layer.msg("密码错误");
								}
							}
					});
					
				});
		});
</script>
<input type="button" id="addsomeexcel" style="display: none;" data-toggle="modal" data-target="#myModal">
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
			<div class="modal-dialog" style="width:600px;height: 400px;">
				<div id="innerexcel" class="modal-content">
						<form method="post" style="margin-left: 40px;width:520px;height: 250px; margin-top:30px;" id="myDropzone" enctype="multipart/form-data" class="dropzone col-md-8" action="mulExcelupload" />
						</form>
					<div class="row" style="margin-top: 35px; margin-left: 480px" >
						<button id="submit" class="bk-margin-5 btn btn-labeled btn-success" type="button">
								<span class="btn-label"><i class="fa fa-check"></i></span>提交</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
</div>
<script type="application/javascript">
	Dropzone.options.myDropzone = {
		autoProcessQueue: false,
		addRemoveLinks:true,
		acceptedFiles:".xls,.xlsx",
			dictInvalidFileType: "你不能上传该类型文件,文件类型只能是*.xls,*.xlsx",
				init: function() {
					var submitButton = document.querySelector("#submit");
					myDropzone = this; // closure
					submitButton.addEventListener("click", function() {
					myDropzone.processQueue(); // Tell Dropzone to process all queued files.
					});
				
			}
};
</script>
<div class="modal fade" id="createexammodel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
			<div class="modal-dialog" style="width:480px;height: 280px;">
				<div class="modal-content bk-padding-15" style="width:450px;height: 250px;">
					<div class="col-lg-1">
					</div>
				<div class="col-lg-4 bk-padding-15" >
					<div class="panel bk-widget bk-border-off">
									<a class="panel-body bk-fg-primary bk-bg-white bk-ltr">
									<div class="text-left bk-vcenter bk-padding-off">
									<span class="bk-round bk-border-white bk-icon bk-icon-3x bk-bg-primary">
									<i class="fa  fa-desktop fa-3x"></i>
									</span>
									</div>
									<div class=" bk-vcenter ">
									<h4 class=" texbk-margin-off">智能创卷</h3>
									<h6 class="bk-fg-gray">可以根据用户所填试卷信息自动生成试卷</h6>
									
									</div>
									</a>
					</div>
				</div>
				<div class="col-lg-2"></div>
				<div class="col-lg-4 bk-padding-15">
					<div class="panel bk-widget bk-border-off">
										<a class="panel-body bk-fg-primary bk-bg-white bk-ltr">
										<div class="text-left bk-vcenter bk-padding-off">
										<span class="bk-round bk-border-white bk-icon bk-icon-3x bk-bg-primary">
										<i class="fa fa-user fa-3x"></i>
										</span>
										<div class=" bk-vcenter ">
										<h4 class=" texbk-margin-off">手动创卷</h3>
										<h6 class="bk-fg-gray">用户手动选择要加入的题库</h6>
										
										</div>
										</a>
					</div>
				</div>	
				
				
				
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
	</div>
</html>