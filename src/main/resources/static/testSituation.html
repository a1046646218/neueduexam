<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">

	<head>
	
		<!-- Basic -->
    	<meta charset="UTF-8" />

		<title>邀请页</title>
	 
		<!-- Mobile Metas -->
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		
		<!-- Import google fonts -->
        <link th:href='@{static/http://fonts.useso.com/css?family=Titillium+Web}' rel='stylesheet' type='text/css'>
        
		<!-- Favicon and touch icons -->
		<link rel="shortcut icon" th:href="@{static/assets/ico/favicon.ico}" type="image/x-icon" />
		<link rel="apple-touch-icon" th:href="@{static/assets/ico/apple-touch-icon.png}" />
		<link rel="apple-touch-icon" sizes="57x57" th:href="@{static/assets/ico/apple-touch-icon-57x57.png}" />
		<link rel="apple-touch-icon" sizes="72x72" th:href="@{static/assets/ico/apple-touch-icon-72x72.png}" />
		<link rel="apple-touch-icon" sizes="76x76" th:href="@{static/assets/ico/apple-touch-icon-76x76.png}" />
		<link rel="apple-touch-icon" sizes="114x114" th:href="@{static/assets/ico/apple-touch-icon-114x114.png}" />
		<link rel="apple-touch-icon" sizes="120x120" th:href="@{static/assets/ico/apple-touch-icon-120x120.png}" />
		<link rel="apple-touch-icon" sizes="144x144" th:href="@{static/assets/ico/apple-touch-icon-144x144.png}" />
		<link rel="apple-touch-icon" sizes="152x152" th:href="@{static/assets/ico/apple-touch-icon-152x152.png}" />
		
	    <!-- start: CSS file-->
		
		<!-- Vendor CSS-->
		<link th:href="@{static/assets/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/skycons/css/skycons.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/font-awesome/css/font-awesome.min.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/css/pace.preloader.css}" rel="stylesheet" />
		
		<!-- Plugins CSS-->
		<link th:href="@{static/assets/plugins/bootkit/css/bootkit.css}" rel="stylesheet" />
		<link th:href="@{static/assets/plugins/select2/select2.css}" rel="stylesheet" />
		<link th:href="@{staitc/assets/plugins/jquery-datatables-bs3/css/datatables.css}" rel="stylesheet" />		
		
		<!-- Theme CSS -->
		<link th:href="@{static/assets/css/jquery.mmenu.css}" rel="stylesheet" />
		
		<!-- Page CSS -->		
		<link th:href="@{static/assets/css/style.css}" rel="stylesheet" />
		<link th:href="@{static/assets/css/add-ons.min.css}" rel="stylesheet" />
		
		<!-- end: CSS file-->	
	    
		
		<!-- Head Libs -->
		<script th:src="@{static/assets/plugins/modernizr/js/modernizr.js}"></script>
		
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->		
		
	</head>
	
	<body>
	
		<!-- Start: Header -->
		<div class="navbar" role="navigation">
			<div class="container-fluid container-nav">
				
				<!-- Navbar Left -->
				
				<!-- Navbar Right -->
				<div class="col-lg-6 bk-fg-info">
				<a class="col-xs-2 bk-fg-info" href="home">
				<i class=" glyphicon glyphicon-home"></i> <small> 首页</small>
				</a>
				<a class="col-xs-2 bk-fg-info" href="toshop">
				<i class="fa fa-shopping-cart"></i> <small> 商城</small>
				</a>
				<a class="col-xs-2 bk-fg-info" href="grouphome">
				<i class="fa fa-envelope"></i> <small> 群组</small>
				</a>
				
				</div>
				
				<!-- Navbar Right -->
				<div class="navbar-right">					
					<!-- Notifications -->
					<ul class="notifications hidden-xs">
						
					</ul>
					<!-- End Notifications -->					
					<!-- Userbox -->
					<div class="userbox">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<figure class="profile-picture hidden-xs">
								<img th:src="${session.user.headphoto}" class="img-circle" alt="" />
							</figure>
							<div class="profile-info">
								<span class="name">用户名：<span th:text="${session.user.nickname}"></span></span>
								<span class="role"><i class="fa fa-circle bk-fg-success"></i> 用户类型:<span th:text="${session.user.type}"></span></span>
							</div>			
							<i class="fa custom-caret"></i>
						</a>
						<div class="dropdown-menu bk-padding-top-70">
							<ul class="list-unstyled">	
								<li>
									<a href="getinpeoplehome"><i class="fa fa-user"></i>个人中心</a>
								</li>
								<li>
									<a href="topayhome"><i class="fa fa-usd"></i>账户充值</a>
								</li>
								<li>
									<a href="loginoutMJ"><i class="fa fa-power-off"></i>退出</a>
								</li>
							</ul>
						</div>						
					</div>
					<!-- End Userbox -->
				</div>
				<!-- End Navbar Right -->
			</div>		
		</div>
		<!-- End: Header -->
		
		<!-- Start: Content -->
		<div class="container-fluid content">	
			<div class="row">
			
				<!-- Sidebar -->
				<div class="sidebar">
					<div class="sidebar-collapse">
						<!-- Sidebar Header Logo-->
						<div class="sidebar-header">
							<img th:src="@{static/assets/img/logo.png}" class="img-responsive" alt="" />
						</div>
						<!-- Sidebar Menu-->
						<div class="sidebar-menu">						
							<nav id="menu" class="nav-main" role="navigation">
								<ul class="nav nav-sidebar">
									<div class="panel-body text-center">								
										<div class="flag">
											<button type="button" class="bk-margin-10 btn btn-primary btn-lg"><i class="fa fa-pencil-square-o"></i>参加考试</button>
											<!-- <img th:src="@{static/assets/img/flags/USA.png}" class="img-flags" alt="" /> -->
										</div>
									</div>
									<li>
											<a href="toteacherhome">
												<i class="fa fa-laptop" aria-hidden="true"></i><span>个人中心</span>
											</a>
										</li>
											<li class="nav-parent">
											<a>
												<i class="fa fa-table" aria-hidden="true"></i><span>我的考试</span>
											</a>
											<ul class="nav nav-children">
												<li><a href="toteacherhasexam"><span class="text"> 我的卷纸</span></a></li>
												<li><a href="toteacherpublichexam"><span class="text"> 发布的卷纸</span></a></li>
											</ul>
										</li>
										<li>
											<a href="toteacherquestionlib">
												<!-- <span class="pull-right label label-danger">235</span> -->
												<i class="fa fa-folder-o" aria-hidden="true"></i><span>我的题库</span>
											</a>
										</li>
										<li>
											<a href="grouphome">
												<!-- <span class="pull-right label label-danger">235</span> -->
												<i class="fa fa-folder-o" aria-hidden="true"></i><span>我的群组</span>
											</a>
										</li>
										<li>
											<a href="toteacherpayrecord">
												<i class="fa  fa-shopping-cart" aria-hidden="true"></i><span>消费记录</span>
											</a>
										</li>			
										
									</ul>
							</nav>
						</div>
						<!-- End Sidebar Menu-->
					</div>
					<!-- Sidebar Footer-->
					<div class="sidebar-footer">					
						<div class="small-chart-visits">
							<div class="small-chart" id="sparklineLineVisits"></div>
							<div class="small-chart-info">
								<label>New Visits</label>
								<strong>70,79%</strong>
							</div>
							<script type="text/javascript">
								var sparklineLineVisitsData = [15, 16, 17, 19, 15, 25, 23, 35, 29, 15, 30, 45];
							</script>
						</div>
						<ul class="sidebar-terms bk-margin-top-10">
							<li><a href="#">Terms</a></li>
							<li><a href="#">Privacy</a></li>
							<li><a href="#">Help</a></li>
							<li><a href="#">About</a></li>
						</ul>					
					</div>
					<!-- End Sidebar Footer-->
				</div>
				<!-- End Sidebar -->
				
				<!-- Main Page -->
				<div class="main">
					<!-- Page Header -->
					<div class="page-header">
						<div class="pull-left">
							<ol class="breadcrumb visible-sm visible-md visible-lg">								
								<li><a href="tostudenthome" class="active"><i class="icon fa fa-home"></i>个人中心</a></li>
								<!-- <li><a href="#"><i class="icon fa fa-adjust"></i>tostudenthome</a></li>
								<li class="active"><i class="fa fa-map-marker"></i>Basic</li> -->
							</ol>						
						</div>
					</div>
					<!-- End Page Header -->					
					<!-- 我的位置 头部 -->
					<!-- Start: Content -->
					<div class="container-fluid content">	
						<div class="row">
							<!--真表格开始 -->
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-bottom:10px">
								<div class="col-lg-4 col-md-4 col-sm-4 col-xs-12"  >
									<div class="panel panel-default bk-bg-white" style="height:300px;" id="echart1">
																	
									</div>
								</div>
								<div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
									<div class="panel panel-default bk-bg-white" style="height:300px;" id="echart2">
																	
									</div>									
								</div>	
							</div>							
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
								<div class="panel panel-default bk-bg-white">
									<div class="panel-heading bk-bg-white">
										<h6 id="biaoti"><i class="fa fa-table red"></i><span class="break"></span></h6>							
										<div class="panel-actions">
											<a href="#" class="btn-minimize"><i class="fa fa-caret-up"></i></a>
											<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
										</div>
									</div>
									<div class="panel-body">
										<table class="table table-striped table-bordered table-hover" id="example">
											<thead>
												<tr>
													<th>考生id</th>
													<th>昵称</th>
													<th>得分</th>
													<th>浏览器</th>
													<th>答题时ip地址</th>
													<th>答题操作系统</th>
													<th>切出次数</th>
													<th>使用时间</th>
													<th>批改状态</th>
													<th>地点</th>
													<th>考卷名称</th>
												</tr>
											</thead>
											<tbody id="test">
												<tr class="gradeX">
													<td><a>1</a></td>
													<td>Internet
														Explorer 4.0
													</td>
													<td>Win 95+</td>
													<td class="center hidden-phone">4</td>
													<td class="center hidden-phone">X</td>
												</tr>
											</tbody>
											
										</table>
									</div>
									<!--表格结束 -->
								</div>
							</div>
							<!-- 真表格结束-->
						</div>					   
					</div>
					<!--
			        	End : Content
			        -->		
					<!-- 我的位置 尾部 -->
			
				</div>
				<!-- End Main Page -->
				
				<!-- Footer -->
				
				<!-- End Footer -->
			
			</div>
		</div><!--/container-->
			
		
		<!-- <div class="clearfix"></div> -->		
		
		
		<!-- start: JavaScript-->
		
		<!-- Vendor JS-->				
		<script th:src="@{static/assets/vendor/js/jquery.min.js}"></script>
		<script th:src="@{static/assets/vendor/js/jquery-2.1.1.min.js}"></script>
		<script th:src="@{static/assets/vendor/js/jquery-migrate-1.2.1.min.js}"></script>
		<script th:src="@{static/assets/vendor/bootstrap/js/bootstrap.min.js}"></script>
		<script th:src="@{static/assets/vendor/skycons/js/skycons.js}"></script>
		<script th:src="@{static/assets/vendor/js/pace.min.js}"></script>
		
		<!-- Plugins JS-->
		<!-- <script src="http://maps.google.com/maps/api/js?sensor=false"></script> -->
		<!-- <script th:src="@{static/assets/plugins/gmaps/gmaps.js}"></script> -->
		<script th:src="@{static/assets/plugins/moment/js/moment.min.js}"></script>
		<script th:src="@{static/assets/plugins/select2/select2.js}"></script>				
		<script th:src="@{static/assets/plugins/jquery-datatables/media/js/jquery.dataTables.js}"></script> 
		<script th:src="@{static/assets/plugins/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js}"></script>
		<script th:src="@{static/assets/plugins/jquery-datatables-bs3/js/datatables.js}"></script>
		<script th:src="@{static/assets/plugins/sparkline/js/jquery.sparkline.min.js}"></script>		 
		<!-- Theme JS -->		
		<script th:src="@{static/assets/js/jquery.mmenu.min.js}"></script>
		<script th:src="@{static/assets/js/core.min.js}"></script>
		<script th:src="@{static/layer/layer.js}"></script>
		<script th:src="@{static/js/echarts.min.js}"></script>
		<script th:src="@{static/js/echarts-gl.min.js}"></script>
		<!-- Pages JS -->
		<!-- <script th:src="@{static/assets/js/pages/map-basic.js}"></script> -->
		<script th:src="@{static/assets/js/pages/table-advanced.js}"></script>
		<!-- end: JavaScript-->
		<!--
        	作者：hxb
        	时间：2019-06-17
        	描述：自定义的js脚本用于
        -->
		
		<input type="text" th:value="${testid}" style="display: none;" id="gettestid">
		
		
		<script>
			$(document).ready(function() {
				
				var testid = $("#gettestid").val();
				
    			$('#example').DataTable({
    				sDom: "<'row datatables-header form-inline'<'col-sm-12 col-md-7'l><'col-sm-12 col-md-3'f>r<'col-sm-12 col-md-2'<'#abutton'>>><'table-responsive't><'row datatables-footer'<'col-sm-12 col-md-10'i><'col-sm-12 col-md-2'p>>",
    				//json格式  
    				//
    				//分页样式 http://datatables.club/reference/option/pagingType.html
  					//"pagingType": "simple_numbers",
    				//proccessing 用于当处理大量数据时，提示正在加载 http://datatables.club/reference/option/processing.html
    				"processing": true,
    				"autoWidth":false,
    				// language代表语言
    				"language": {
    						"sProcessing":   "处理中...",
							"sLengthMenu":   "显示 _MENU_ 项结果",
							"sZeroRecords":  "没有匹配结果",
							"sInfo":         "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
							"sInfoEmpty":    "显示第 0 至 0 项结果，共 0 项",
							"sInfoFiltered": "(由 _MAX_ 项结果过滤)",
							"sInfoPostFix":  "",
							//"search":       "输入关键字",
							"sUrl":          "",
							"sEmptyTable":     "表中数据为空",
							"sLoadingRecords": "载入中...",
							"sInfoThousands":  ",",
							"searchPlaceholder" : "完全搜索匹配",
							"oPaginate": {
								"sFirst":    "首页",
								"sPrevious": "上页", 
								"sNext":     "下页",
								"sLast":     "末页"
							},
							"oAria": {
								"sSortAscending":  ": 以升序排列此列",
								"sSortDescending": ": 以降序排列此列"
							}
       				},
       				//lengthMenu代表每页显示数量 详情见:http://datatables.club/reference/option/lengthMenu.html
    				"lengthMenu": [ [10, 25, 50, 100,-1], [10, 25, 50, 100,"all"] ],
    				"ajax":{
   						url:"testSituationJson",
   						data:{"testId":testid},
   						"dataSrc":function(json){
							var testName = json.testName
							$("#biaoti").append(testName);
							for(var i=0;i<json.data.length;i++){
								json.data[i].state = "<a href='https://www.hao123.com' style='color:blue' >"+json.data[i].state+"</a>"
							}
							return json.data;
    					}
    				},
    				columns:[
                		{"data":"stuid"},
                		{"data":"stunickname"},
               			{"data":"score"},
               			{"data":"browser"},
               			{"data":"ipaddress"},
               			{"data":"operatingsystem"},
               			{"data":"changeout"},
               			{"data":"duration"},
               			{"data":"state"},
               			{"data":"local"},
               			{"data":"other1"}
           			]
    			});
    			
    			$("#abutton").append("<button class='btn btn-primary' href='/writeHxbExcel'>导出Excel</button>");
    			$("#abutton>button").click(function(){
    				$(location).attr('href', '/writeHxbExcel');
    			});
    			
			})

		</script>
		
		<script>
		var testid = $("#gettestid").val();
			function addEchart1(jsonobj){

				var selected = {};
				selected['未批改'] = jsonobj.e1 > 0;			
				selected['已批改'] = jsonobj.e2 >0;	

				var myChart = echarts.init(document.getElementById("echart1"));
				option = {
				    title : {
				        text: '批改人数统计',
				        x:'center',
				        textStyle:{
				        	fontSize:20,
				        },
				    },
				    tooltip : {
				        trigger: 'item',
				        formatter: "{a} <br/>{b} : {c} ({d}%)"
				    },
				    legend: {
				        orient: 'vertical',
				        left: 'left',
				        data: ['未批改','已批改'],
				        textStyle:{
				            fontSize:20
				        },
				        selected:selected,
				    },
				    series : [
				        {
				            name: '访问来源',
				            type: 'pie',
				            radius : '55%',
				            center: ['50%', '60%'],
				            data:[
				                {value:jsonobj.e1, name:'未批改'},
				                {value:jsonobj.e2, name:'已批改'},			
				            ],
				            itemStyle: {
				                emphasis: {
				                    shadowBlur: 10,
				                    shadowOffsetX: 0,
				                    shadowColor: 'rgba(0, 0, 0, 0.5)'
				                }
				            },
				            label:{
				                textStyle:{
				                    fontSize:25
				                }
				            }
				        }
				    ],
				};
				myChart.setOption(option);   
			}
			$.ajax({
				type:'post', 
				url:'getNumOfTestStateJson',
				async:false,
				data:{"testId":testid},
				dataType:"json",
				success:function(jsonobj){
					addEchart1(jsonobj);
				}
			});
		</script>
		
		<script>
			var testid = $("#gettestid").val();
			
			function addEchart2(jsonobj){
				//alert(jsonobj)
				//jsoncomment.reviewId;
				 var myChart = echarts.init(document.getElementById("echart2"));
				// 指定图表的配置项和数据
				 option = {
				    title: {
				        text: '已批改试卷分值统计',
				        x:"center"
				    },
					radius: '80%',
					center: ['70%','50%'],
					toolbox:{
						show:true,
						feature:{
							saveAsImage:{show:true},
							dataView:{show:true},
							restore:{show:true},
							dataZoom:{show:true}
						},
						x:"right"
					},
				    legend:{
				        //orient: 'vertical',
				        //left: 'left',
				        data: ["不及格","60~70","71~80","81~90","91~100"],			    	
				    },
				    tooltip: {
				    	trigger: 'axis',
				        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
				            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
				        }				    	
				    },
				    xAxis: {
				        data: ["不及格","60~70","71~80","81~90","91~100"],
				    },
				    yAxis: {},
				    series: [{
				        name: '题目数量',
				        type: 'bar',
				        data: [jsonobj.e1,jsonobj.e2,jsonobj.e3,jsonobj.e4,jsonobj.e5]
				    }],

				};
				// 使用刚指定的配置项和数据显示图表。
				myChart.setOption(option);
			}		
			$.ajax({
				type:'post', 
				url:'getNumOfScoreJson',
				async:true,
				data:{"testId":testid},
				dataType:"json",
				success:function(jsonobj){
					addEchart2(jsonobj);
				}
			});
		</script>
		
	</body>
	
</html>