<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">

	<head>
	
		<!-- Basic -->
    	<meta charset="UTF-8" />

		<title>邀请页</title>
	 
		<!-- Mobile Metas -->
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		
		<!-- Import google fonts -->
        <link th:href='@{static/http://fonts.useso.com/css?family=Titillium+Web}' rel='stylesheet' type='text/css'>
        
		<!-- Favicon and touch icons -->
		<link rel="shortcut icon" th:href="@{static/assets/ico/favicon.ico}" type="image/x-icon" />
		<link rel="apple-touch-icon" th:href="@{static/assets/ico/apple-touch-icon.png}" />
		<link rel="apple-touch-icon" sizes="57x57" th:href="@{static/assets/ico/apple-touch-icon-57x57.png}" />
		<link rel="apple-touch-icon" sizes="72x72" th:href="@{static/assets/ico/apple-touch-icon-72x72.png}" />
		<link rel="apple-touch-icon" sizes="76x76" th:href="@{static/assets/ico/apple-touch-icon-76x76.png}" />
		<link rel="apple-touch-icon" sizes="114x114" th:href="@{static/assets/ico/apple-touch-icon-114x114.png}" />
		<link rel="apple-touch-icon" sizes="120x120" th:href="@{static/assets/ico/apple-touch-icon-120x120.png}" />
		<link rel="apple-touch-icon" sizes="144x144" th:href="@{static/assets/ico/apple-touch-icon-144x144.png}" />
		<link rel="apple-touch-icon" sizes="152x152" th:href="@{static/assets/ico/apple-touch-icon-152x152.png}" />
		
	    <!-- start: CSS file-->
		
		<!-- Vendor CSS-->
		<link th:href="@{static/assets/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/skycons/css/skycons.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/font-awesome/css/font-awesome.min.css}" rel="stylesheet" />
		<link th:href="@{static/assets/vendor/css/pace.preloader.css}" rel="stylesheet" />
		<link th:href="@{static/assets/css/build.css}" rel="stylesheet" />
		
		<!-- Plugins CSS-->
		<link th:href="@{static/assets/plugins/bootkit/css/bootkit.css}" rel="stylesheet" />
		<link th:href="@{static/assets/plugins/select2/select2.css}" rel="stylesheet" />
		<link th:href="@{staitc/assets/plugins/jquery-datatables-bs3/css/datatables.css}" rel="stylesheet" />		
		
		<!-- Theme CSS -->
		<link th:href="@{static/assets/css/jquery.mmenu.css}" rel="stylesheet" />
		
		<!-- Page CSS -->		
		<link th:href="@{static/assets/css/style.css}" rel="stylesheet" />
		<link th:href="@{static/assets/css/add-ons.min.css}" rel="stylesheet" />
		
		<!-- end: CSS file-->	
	    
		
		<!-- Head Libs -->
		<script th:src="@{static/assets/plugins/modernizr/js/modernizr.js}"></script>
		
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->		
		
	</head>
	
	<body>
	
		<!-- Start: Header -->
		<div class="navbar" role="navigation">
			<div class="container-fluid container-nav">
				
				<!-- Navbar Left -->
				
				<!-- Navbar Right -->
				<div class="navbar-right">					
					<!-- Notifications -->
					<ul class="notifications hidden-xs">						
						<li>
							<a href="#" class="dropdown-toggle notification-icon" data-toggle="dropdown">
								<i class="fa fa-tasks"></i>
								<span class="badge">10</span>
							</a>
							<ul class="dropdown-menu update-menu" role="menu">
								<li><a href="#"><i class="fa fa-database bk-fg-primary"></i> Database </a></li>
								<li><a href="#"><i class="fa fa-bar-chart-o bk-fg-primary"></i> Connection </a></li>
								<li><a href="#"><i class="fa fa-bell bk-fg-primary"></i> Notification </a></li>
								<li><a href="#"><i class="fa fa-envelope bk-fg-primary"></i> Message </a></li>
								<li><a href="#"><i class="fa fa-flash bk-fg-primary"></i> Traffic </a></li>
								<li><a href="#"><i class="fa fa-credit-card bk-fg-primary"></i> Invoices </a></li>
								<li><a href="#"><i class="fa fa-dollar bk-fg-primary"></i> Finances </a></li>
								<li><a href="#"><i class="fa fa-thumbs-o-up bk-fg-primary"></i> Orders </a></li>
								<li><a href="#"><i class="fa fa-folder bk-fg-primary"></i> Directories </a></li>
								<li><a href="#"><i class="fa fa-users bk-fg-primary"></i> Users </a></li>		
							</ul>
						</li>
						<li>
							<a href="#" class="dropdown-toggle notification-icon" data-toggle="dropdown">
								<i class="fa fa-envelope"></i>
								<span class="badge">5</span>
							</a>
							<ul class="dropdown-menu">
								<li class="dropdown-menu-header">
									<strong>Messages</strong>
									<div class="progress progress-xs  progress-striped active">
										<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
											60%
										</div>
									</div>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" th:src="@{static/assets/img/avatar1.jpg}" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>1 minute ago</small></span>							
									</a>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" th:src="@{static/assets/img/avatar2.jpg}" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>3 minute ago</small></span>								
									</a>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" th:src="@{static/assets/img/avatar3.jpg}" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>4 minute ago</small></span>								
									</a>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" th:src="@{static/assets/img/avatar4.jpg}" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>30 minute ago</small></span>
									</a>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" th:src="@{static/assets/img/avatar5.jpg}" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>1 hours ago</small></span>
									</a>
								</li>						
								<li class="dropdown-menu-footer text-center">
									<a href="page-inbox.html">View all messages</a>
								</li>	
							</ul>
						</li>
						<li>
							<a href="#" class="dropdown-toggle notification-icon" data-toggle="dropdown">
								<i class="fa fa-bell"></i>
								<span class="badge">3</span>
							</a>
							<ul class="dropdown-menu list-group">
								<li class="dropdown-menu-header">
									<strong>Notifications</strong>
									<div class="progress progress-xs  progress-striped active">
										<div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
											60%
										</div>
									</div>
								</li>
								<li class="list-item">
									<a href="page-inbox.html">
										<div class="pull-left">
										   <i class="fa fa-envelope-o bk-fg-primary"></i>
										</div>
										<div class="media-body clearfix">
											<div>Unread Message</div>
											<h6>You have 10 unread message</h6>
										</div>								
									</a>
								</li>
								<li class="list-item">
									<a href="#">
										<div class="pull-left">
										   <i class="fa fa-cogs bk-fg-primary"></i>
										</div>
										<div class="media-body clearfix">
											<div>New Settings</div>
											<h6>There are new settings available</h6>
										</div>								
									</a>
								</li>
								<li class="list-item">
									<a href="#">
										<div class="pull-left">
										   <i class="fa fa-fire bk-fg-primary"></i>
										</div>
										<div class="media-body clearfix">
											<div>Update</div>
											<h6>There are new updates available</h6>
										</div>								
									</a>
								</li>
								<li class="list-item-last">
									<a href="#">
									  <h6>Unread notifications</h6>
									  <span class="badge">15</span>
								   </a>
								</li>
							</ul>
						</li>
					</ul>
					<!-- End Notifications -->					
					<!-- Userbox -->
					<div class="userbox">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<figure class="profile-picture hidden-xs">
								<img th:src="@{static/assets/img/avatar.jpg}" class="img-circle" alt="" />
							</figure>
							<div class="profile-info">
								<span class="name">John Smith Doe</span>
								<span class="role"><i class="fa fa-circle bk-fg-success"></i> Developer</span>
							</div>			
							<i class="fa custom-caret"></i>
						</a>
						<div class="dropdown-menu">
							<ul class="list-unstyled">
								<li class="dropdown-menu-header bk-bg-white bk-margin-top-15">						
									<div class="progress progress-xs  progress-striped active">
										<div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
											60%
										</div>
									</div>							
								</li>	
								<li>
									<a href="page-profile.html"><i class="fa fa-user"></i> Profile</a>
								</li>
								<li>
									<a href="#"><i class="fa fa-wrench"></i> Settings</a>
								</li>
								<li>
									<a href="page-invoice"><i class="fa fa-usd"></i> Payments</a>
								</li>
								<li>
									<a href="#"><i class="fa fa-file"></i> File</a>
								</li>
								<li>
									<a href="page-login.html"><i class="fa fa-power-off"></i> Logout</a>
								</li>
							</ul>
						</div>						
					</div>
					<!-- End Userbox -->
				</div>
				<!-- End Navbar Right -->
			</div>		
		</div>
		<!-- End: Header -->
		
		<!-- Start: Content -->
		<div class="container-fluid content">			
				<div class="main" style="padding-left:200px;padding-right:200px">
					<!-- Page Header -->
					<!-- End Page Header -->					
					<!-- 我的位置 头部 -->
					<!-- Start: Content -->	
						<div class="row">
							<!--真表格开始 -->
							<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
								<div class="panel panel-default bk-bg-white">
									<div class="panel-heading bk-bg-white">
										<h6 id="biaoti"><span class="break"></span>智能生成试卷</h6>							
										<div class="panel-actions">
											<a href="#" class="btn-minimize"><i class="fa fa-caret-up"></i></a>
											<a href="#" class="btn-close"><i class="fa fa-times"></i></a>
										</div>
									</div>
									<div class="panel-body">
										<div class="row">
											<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" style="padding-top:10px">
												<table class="table  table-bordered table-hover" id="example">
													<thead>
														<tr>
															<th>题库id</th>
															<th>题库名</th>
															<th>题库种类</th>
															<th>题库题目数量</th>
														</tr>
													</thead>
													<tbody>
														<tr class="gradeX">
															<td><a>1</a></td>
															<td>Internet
																Explorer 4.0
															</td>
															<td>Win 95+</td>
														</tr>
													</tbody>
												</table>
											</div>
											<div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" >										
												<form class="form-horizontal" role="form" style="padding-top:10px">
													 <div class="form-group" style="padding-left:130px;padding-bottom:10px" >
												  		<h4>试卷当前分数:<span id="fenzhi">0</span></h4>
												 	 </div>
												  <div class="form-group" >
												    <label for="simple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class=" btn btn-info" style="padding-top:6px">输入单选题数量</button>
												    </label>
												    <div class="col-sm-4">
												      <input type="text" class="form-control" id="xuanzeti" placeholder="请输入正整数">
												    </div>
												    <span for="danxuan" class="col-sm-4 " style="padding-top:7px;padding-left:0px">0</span>
												  </div>
												   <div class="form-group" >
												    <label for="simple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class=" btn btn-info" style="padding-top:6px">输入单选题分值</button>
												    </label>
												    <div class="col-sm-4">
												      <input id="fenzhi" type="text" class="form-control" placeholder="0">
												    </div>
												    <span for="simple-2" class="col-sm-4 " style="padding-top:7px;padding-left:0px"></span>
												  </div>
												  <div class="form-group">
												    <label for="multiple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class="btn btn-success" style="padding-top:6px">输入多选题数量</button>
												    </label>
												    <div class="col-sm-4">
												      <input type="text" class="form-control" id="xuanzeti" placeholder="请输入正整数">
												    </div>
												    <span for="duoxuan" class="col-sm-4 " style="padding-top:7px;padding-left:0px">0</span>
												  </div>
												  <div class="form-group">
												    <label for="multiple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class="btn btn-success" style="padding-top:6px">输入多选题分值</button>
												    </label>
												    <div class="col-sm-4">
												      <input id="fenzhi" type="text" class="form-control" placeholder="0">
												    </div>
												    <span for="multiple-2" class="col-sm-4 " style="padding-top:7px;padding-left:0px"></span>
												  </div>
												  <div class="form-group">
												    <label for="simple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class="btn btn-primary" style="padding-top:6px">输入填空题数量</button>
												    </label>
												    <div class="col-sm-4">
												      <input type="text" class="form-control" id="xuanzeti" placeholder="请输入正整数">
												    </div>
												    <span for="tiankong" class="col-sm-4 " style="padding-top:7px;padding-left:0px">0</span>
												  </div>
												  <div class="form-group">
												    <label for="simple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class="btn btn-primary" style="padding-top:6px">输入填空题分值</button>
												    </label>
												    <div class="col-sm-4">
												      <input id="fenzhi" type="text" class="form-control"  placeholder="0">
												    </div>
												    <span for="simple-2" class="col-sm-4 " style="padding-top:7px;padding-left:0px"></span>
												  </div>
												  <div class="form-group">
												    <label for="simple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class="btn btn-warning" style="padding-top:6px">输入判断题数量</button>
												    </label>
												    <div class="col-sm-4">
												      <input type="text" class="form-control" id="xuanzeti" placeholder="请输入正整数">
												    </div>
												    <span for="panduan" class="col-sm-4 " style="padding-top:7px;padding-left:0px">0</span>
												  </div>
												  <div class="form-group">
												    <label for="simple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class="btn btn-warning" style="padding-top:6px">输入判断题分值</button>
												    </label>
												    <div class="col-sm-4">
												      <input id="fenzhi" type="text" class="form-control"  placeholder="0">
												    </div>
												    <span for="simple-2" class="col-sm-4 " style="padding-top:7px;padding-left:0px"></span>
												  </div>
												  <div class="form-group">
												    <label for="simple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class="btn btn-danger" style="padding-top:6px">输入简答题数量</button>
												    </label>
												    <div class="col-sm-4">
												      <input type="text" class="form-control" id="xuanzeti" placeholder="请输入正整数">
												    </div>
												    <span for="jianda" class="col-sm-4 " style="padding-top:7px;padding-left:0px">0</span>
												  </div>
												   <div class="form-group">
												    <label for="simple-1" class="col-sm-4 control-label" style="padding-top:0px">
												    	<button type="button" class="btn btn-danger" style="padding-top:6px">输入简答题分值</button>
												    </label>
												    <div class="col-sm-4">
												      <input id="fenzhi" type="text" class="form-control" placeholder="0">
												    </div>
												    <span for="simple-2" class="col-sm-4 " style="padding-top:7px;padding-left:0px"></span>
												  </div>
												  <div class="form-group" >
												    <div class="col-sm-offset-2 col-sm-10" style="padding-left:150px;padding-top:7px">
												      <button id="submit" type="button" class="btn  btn-primary" disabled="">生成试卷</button>
												    </div>
												  </div>
												</form>
											</div>
										</div>
									</div>
									<!--表格结束 -->
								</div>
							</div>
							<!-- 真表格结束-->
						</div>					   
					<!--
			        	End : Content
			        -->		
					<!-- 我的位置 尾部 -->
			
				</div>
				<!-- End Main Page -->
				
				<!-- Footer -->
				
				<!-- End Footer -->
		</div><!--/container-->
			
		
		<!-- <div class="clearfix"></div> -->		
		
		
		<!-- start: JavaScript-->
		
		<!-- Vendor JS-->				
		<script th:src="@{static/assets/vendor/js/jquery.min.js}"></script>
		<script th:src="@{static/assets/vendor/js/jquery-2.1.1.min.js}"></script>
		<script th:src="@{static/assets/vendor/js/jquery-migrate-1.2.1.min.js}"></script>
		<script th:src="@{static/assets/vendor/bootstrap/js/bootstrap.min.js}"></script>
		<script th:src="@{static/assets/vendor/skycons/js/skycons.js}"></script>
		<script th:src="@{static/assets/vendor/js/pace.min.js}"></script>
		
		<!-- Plugins JS-->
		<!-- <script src="http://maps.google.com/maps/api/js?sensor=false"></script> -->
		<!-- <script th:src="@{static/assets/plugins/gmaps/gmaps.js}"></script> -->
		<script th:src="@{static/assets/plugins/moment/js/moment.min.js}"></script>
		<script th:src="@{static/assets/plugins/select2/select2.js}"></script>				
		<script th:src="@{static/assets/plugins/jquery-datatables/media/js/jquery.dataTables.js}"></script> 
		<script th:src="@{static/assets/plugins/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js}"></script>
		<script th:src="@{static/assets/plugins/jquery-datatables-bs3/js/datatables.js}"></script>
		<script th:src="@{static/assets/plugins/sparkline/js/jquery.sparkline.min.js}"></script>		 
		<!-- Theme JS -->		
		<script th:src="@{static/assets/js/jquery.mmenu.min.js}"></script>
		<script th:src="@{static/assets/js/core.min.js}"></script>
		
		<!-- Pages JS -->
		<!-- <script th:src="@{static/assets/js/pages/map-basic.js}"></script> -->
		<script th:src="@{static/assets/js/pages/table-advanced.js}"></script>
		<!-- end: JavaScript-->
		<script th:src="@{static/js/template.js}"></script>
		<script th:src="@{static/layer/layer.js}"></script>
        <script type="text/html" id="contentTemplate">
			{{each data as value}}	
				<div class='checkbox' id='{{value.libId}}'>
					<input id='checkbox2' class='styled' type='checkbox' check>
					<label for='mycheckbox'>
						{{value.libId}}
					</label>
				</div>
			{{/each}}
        </script>
		<script type="text/html" id="contentTemplate2">
			{{each data as value}}	
				<div class='checkbox' id='{{value.libId}}'>
					<input id='checkbox3' class='styled' type='checkbox' disabled>
					<label for='mycheckbox'>
						{{value.libId}}
					</label>
				</div>
			{{/each}}
        </script>
		
		<script>
			$(document).ready(function() {
    			$('#example').DataTable({
    				//json格式  
    				//
    				//分页样式 http://datatables.club/reference/option/pagingType.html
  					//"pagingType": "simple_numbers",
    				//proccessing 用于当处理大量数据时，提示正在加载 http://datatables.club/reference/option/processing.html
    				"processing": true,
    				// language代表语言
    				"language": {
    						"sProcessing":   "处理中...",
							"sLengthMenu":   "显示 _MENU_个题库",
							"sZeroRecords":  "没有匹配结果",
							"sInfo":         "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
							"sInfoEmpty":    "显示第 0 至 0 个题库，共 0 项",
							"sInfoFiltered": "(由 _MAX_ 项结果过滤)",
							"sInfoPostFix":  "",
							//"search":       "输入关键字",
							"sUrl":          "",
							"sEmptyTable":     "表中数据为空",
							"sLoadingRecords": "载入中...",
							"sInfoThousands":  ",",
							"searchPlaceholder" : "过滤",
							"oPaginate": {
								"sFirst":    "首页",
								"sPrevious": "上页", 
								"sNext":     "下页",
								"sLast":     "末页"
							},
							"oAria": {
								"sSortAscending":  ": 以升序排列此列",
								"sSortDescending": ": 以降序排列此列"
							}
       				},
       				//lengthMenu代表每页显示数量 详情见:http://datatables.club/reference/option/lengthMenu.html
    				"lengthMenu": [ [10, 25, 50, 100,-1], [10, 25, 50, 100,"all"] ],
    				"ajax":{
   						url:"examLibNameJson",
   						"dataSrc":function(json){
							for(var i=0;i<json.data.length;i++){
								if(json.data[i].quesAmount!=0){
										var j = JSON.stringify(json.data[i]);
										var result = "{\"data\":["+j+"]}"
										json.data[i].libId = template("contentTemplate",JSON.parse(result));  
								}else{
									var j = JSON.stringify(json.data[i]);
									var result = "{\"data\":["+j+"]}"
									json.data[i].libId = template("contentTemplate2",JSON.parse(result));  
								}
								//alert(JSON.stringify(json.data[i]))
							}
							return json.data;
    					}
    				},
    				columns:[
                		{"data":"libId"},
                		{"data":"libName"},
               			{"data":"libType"},
               			{"data":"quesAmount"}
           			]
    			});

			
    			
    			$("#abutton").append("<button type='button' class='btn btn-primary'>绑定题库</button>");
    			
    			

    			//绑定题库按钮的逻辑
    			$("#abutton>button").click(function(){
    				if($(this).text()=="绑定题库"){
    					if($("div[class='checkbox checkbox-success'").length!=0){
    						var libId = [];
							$("div[class='checkbox checkbox-success'").each(function(){
								libId[libId.length] = $(this).attr("id");
							});
    						$.ajax({
    							type:"post",
    							url:"questionNumberJson",
    							async:true,
    							data:JSON.stringify(libId),
    							contentType:"application/json",
    							dataType:"json",
    							success:function(result){
    								$("span[for='danxuan']").text(result.numOfSingle);
    								$("span[for='duoxuan']").text(result.numOfMultiple);
    								$("span[for='panduan']").text(result.numOfJudge);
    								$("span[for='tiankong']").text(result.numOfBlank);
    								$("span[for='jianda']").text(result.numOfAnswer); 
    							}
    						});
	    					$(this).text("解除绑定")
	    					$("[id=checkbox2]").attr("disabled","");
	    					$("#submit").removeAttr("disabled");
	    				}else{
	    					shake("#abutton>button");
	    				}
    				}else{
    					$(this).text("绑定题库")
    					$("[id=checkbox2]").removeAttr("disabled")	;
    					$("#submit").attr("disabled","");
    				}
    			});
				
				//更改复选框的css
    			$(document.body).on("click","input[type='checkbox']",function(e){
    				if($(this).parent().attr("class")=="checkbox"){
						$(this).parent().attr("class","checkbox checkbox-success")
						$(this)
    				}else{
    					$(this).parent().attr("class","checkbox")
    				}
    			});
    			
    			//包括0的正整数正则表达式
    			var reg = /^[+]{0,1}(\d+)$/
    			//选择题数量输入框的逻辑
    			$("input[id='xuanzeti']").blur(function(){
    				var x = $(this).val();
					if(!(reg.test(x))){
						layer.msg("请输入正整数")
						$(this).val("");
					}else{
						var max = $(this).parent().next().text();
						if(x>max){
							$(this).val(max);
						}
					}
    				compute();
    			});
    			
    			//清空输入框 
    			$("input[type='text']").each(function(){
    				$(this).val("");
    			});
    			
    			//分数输入框的逻辑
  				$("input[id='fenzhi']").blur(function(){
    				var x = $(this).val();
					if(!(reg.test(x))){
						layer.msg("请输入正整数")
						$(this).val("0");
					}
    				compute();
    			});
    			
    			//提交试卷的逻辑
    			$("button[id='submit']").click(function(){
    				var x = $("span[id='fenzhi']").text();
    				if(x!='100'){
    					shake("button[id='submit']");
    					layer.msg("请让试卷总分值达到100"); 
    				}else{
    					var libId = [];
    					var scores = [];
    					var quesNums = [];

						$("div[class='checkbox checkbox-success'").each(function(){
							libId[libId.length] = $(this).attr("id");
						});
						$("input[id='fenzhi']").each(function(){
							var v = $(this).val();
							if(!(parseInt(x)>=0)){
								v = 0;
							}
							scores.push(v);
						});
						$("input[id='xuanzeti']").each(function(){
							var v = $(this).val();
							if(!(parseInt(x)>=0)){
								v = 0;
							}
							quesNums.push(v);
						});
						$("")
    					$.ajax({
    						type:"post",
    						url:"/createTestPaperJson",
    						async:true,
    						data:{libId:libId,scores:scores,quesNums:quesNums},
    						success:function(){
    							layer.msg("成功");
    						}
    					});
    				}
    			});
    			
    			//让按钮震动的函数
    			function shake(o){
    		        var $panel = $(o);
    		        box_left = 0;
    		        //box_left = $panel.css('left');
    		        //box_left = ($(window).width() -  $panel.width()) / 2;
    		        $panel.css({'left': box_left,'position':'relative'});
    		        for(var i=1; 4>=i; i++){
    		            $panel.animate({left:box_left-(20-5*i)},30);
    		            $panel.animate({left:box_left+(20-5*i)},30);
    		        }
    		    }    
    			
    			//计算当前试卷分数的函数
    			function compute(){
    				var numOfQuestions = [];
    				var scores = [];
    				$("input[id='xuanzeti']").each(function(){
    					var num = $(this).val();
    					if(!parseInt(num)){
    						num = 0;
    					}
    					//alert("题目数"+num)
    					numOfQuestions[numOfQuestions.length] = num;
    				});
    				$("input[id='fenzhi']").each(function(){
    					var score = $(this).val();
    					if(!parseInt(score)){
    						score = 0;
    					}
    					//alert("分值"+score)
    					scores[scores.length] = score;
    				});
    				
    				var show = 0;
    				for(var i=0;i<scores.length;i++){
    					show += parseInt(numOfQuestions[i]) * parseInt(scores[i])
    				}
    				//alert(show);
    				$("span[id=fenzhi]").text(parseInt(show)); 
    			}
    			 
    			
			})
			

			

		</script>
		
	</body>
	
</html>